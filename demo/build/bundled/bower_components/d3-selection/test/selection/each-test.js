var tape=require("tape"),jsdom=require("../jsdom"),d3=require("../../");tape("selection.each(function) calls the specified function for each selected element in order",function(e){var n=[],o=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),t=o.querySelector("#one"),d=o.querySelector("#two"),i=d3.selectAll([t,d]).datum(function(e,n){return"node-"+n});e.equal(i.each(function(e,o,t){n.push(this,e,o,t)}),i),e.deepEqual(n,[t,"node-0",0,[t,d],d,"node-1",1,[t,d]]),e.end()}),tape("selection.each(function) skips missing elements",function(e){var n=[],o=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),t=o.querySelector("#one"),d=o.querySelector("#two"),i=d3.selectAll([,t,,d]).datum(function(e,n){return"node-"+n});e.equal(i.each(function(e,o,t){n.push(this,e,o,t)}),i),e.deepEqual(n,[t,"node-1",1,[,t,,d],d,"node-3",3,[,t,,d]]),e.end()});