var tape=require("tape"),jsdom=require("../jsdom"),d3=require("../../");tape("selection.dispatch(type) dispatches a custom event of the specified type to each selected element in order",function(e){var t,n=[],a=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),l=a.querySelector("#one"),u=a.querySelector("#two"),o=d3.selectAll([l,u]).datum(function(e,t){return"node-"+t}).on("bang",function(e,a,l){t=d3.event,n.push(this,e,a,l)});e.equal(o.dispatch("bang"),o),e.deepEqual(n,[l,"node-0",0,[l,u],u,"node-1",1,[l,u]]),e.equal(t.type,"bang"),e.equal(t.bubbles,!1),e.equal(t.cancelable,!1),e.equal(t.detail,null),e.end()}),tape("selection.dispatch(type, params) dispatches a custom event with the specified constant parameters",function(e){var t,n=[],a=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),l=a.querySelector("#one"),u=a.querySelector("#two"),o=d3.selectAll([l,u]).datum(function(e,t){return"node-"+t}).on("bang",function(e,a,l){t=d3.event,n.push(this,e,a,l)});e.equal(o.dispatch("bang",{bubbles:!0,cancelable:!0,detail:"loud"}),o),e.deepEqual(n,[l,"node-0",0,[l,u],u,"node-1",1,[l,u]]),e.equal(t.type,"bang"),e.equal(t.bubbles,!0),e.equal(t.cancelable,!0),e.equal(t.detail,"loud"),e.end()}),tape("selection.dispatch(type, function) dispatches a custom event with the specified parameter function",function(e){var t=[],n=[],a=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),l=a.querySelector("#one"),u=a.querySelector("#two"),o=d3.selectAll([l,u]).datum(function(e,t){return"node-"+t}).on("bang",function(e,a,l){n.push(d3.event),t.push(this,e,a,l)});e.equal(o.dispatch("bang",function(e,t){return{bubbles:!0,cancelable:!0,detail:"loud-"+t}}),o),e.deepEqual(t,[l,"node-0",0,[l,u],u,"node-1",1,[l,u]]),e.equal(n[0].type,"bang"),e.equal(n[0].bubbles,!0),e.equal(n[0].cancelable,!0),e.equal(n[0].detail,"loud-0"),e.equal(n[1].type,"bang"),e.equal(n[1].bubbles,!0),e.equal(n[1].cancelable,!0),e.equal(n[1].detail,"loud-1"),e.end()}),tape("selection.dispatch(type) skips missing elements",function(e){var t,n=[],a=jsdom("<h1 id='one'></h1><h1 id='two'></h1>"),l=a.querySelector("#one"),u=a.querySelector("#two"),o=d3.selectAll([,l,,u]).datum(function(e,t){return"node-"+t}).on("bang",function(e,a,l){t=d3.event,n.push(this,e,a,l)});e.equal(o.dispatch("bang"),o),e.deepEqual(n,[l,"node-1",1,[,l,,u],u,"node-3",3,[,l,,u]]),e.equal(t.type,"bang"),e.equal(t.detail,null),e.end()});