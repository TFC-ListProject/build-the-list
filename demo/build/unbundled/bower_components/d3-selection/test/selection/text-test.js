var tape=require("tape"),jsdom=require("../jsdom"),d3=require("../../");tape("selection.text() returns the text content on the first selected element",function(e){var t={textContent:"hello"};e.equal(d3.select(t).text(),"hello"),e.equal(d3.selectAll([null,t]).text(),"hello"),e.end()}),tape("selection.text(value) sets text content on the selected elements",function(e){var t={textContent:""},n={textContent:""},l=d3.selectAll([t,n]);e.equal(l.text("bar"),l),e.equal(t.textContent,"bar"),e.equal(n.textContent,"bar"),e.end()}),tape("selection.text(null) clears the text content on the selected elements",function(e){var t={textContent:"bar"},n={textContent:"bar"},l=d3.selectAll([t,n]);e.equal(l.text(null),l),e.equal(t.textContent,""),e.equal(n.textContent,""),e.end()}),tape("selection.text(function) sets the value of the text content on the selected elements",function(e){var t={textContent:"bar"},n={textContent:"bar"},l=d3.selectAll([t,n]);e.equal(l.text(function(e,t){return t?"baz":null}),l),e.equal(t.textContent,""),e.equal(n.textContent,"baz"),e.end()}),tape("selection.text(function) passes the value function data, index and group",function(e){var t=jsdom("<parent id='one'><child id='three'></child><child id='four'></child></parent><parent id='two'><child id='five'></child></parent>"),n=t.querySelector("#one"),l=t.querySelector("#two"),o=t.querySelector("#three"),a=t.querySelector("#four"),r=t.querySelector("#five"),c=[];d3.selectAll([n,l]).datum(function(e,t){return"parent-"+t}).selectAll("child").data(function(e,t){return[0,1].map(function(e){return"child-"+t+"-"+e})}).text(function(e,t,n){c.push([this,e,t,n])}),e.deepEqual(c,[[o,"child-0-0",0,[o,a]],[a,"child-0-1",1,[o,a]],[r,"child-1-0",0,[r]]]),e.end()});