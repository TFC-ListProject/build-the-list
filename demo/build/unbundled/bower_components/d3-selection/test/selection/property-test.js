var tape=require("tape"),jsdom=require("../jsdom"),d3=require("../../");tape("selection.property(name) returns the property with the specified name on the first selected element",function(e){var t={foo:42};e.equal(d3.select(t).property("foo"),42),e.equal(d3.selectAll([null,t]).property("foo"),42),e.end()}),tape("selection.property(name, value) sets property with the specified name on the selected elements",function(e){var t={},o={},r=d3.selectAll([t,o]);e.equal(r.property("foo","bar"),r),e.equal(t.foo,"bar"),e.equal(o.foo,"bar"),e.end()}),tape("selection.property(name, null) removes the property with the specified name on the selected elements",function(e){var t={foo:"bar"},o={foo:"bar"},r=d3.selectAll([t,o]);e.equal(r.property("foo",null),r),e.equal("foo"in t,!1),e.equal("foo"in o,!1),e.end()}),tape("selection.property(name, function) sets the value of the property with the specified name on the selected elements",function(e){var t={foo:"bar"},o={foo:"bar"},r=d3.selectAll([t,o]);e.equal(r.property("foo",function(e,t){return t?"baz":null}),r),e.equal("foo"in t,!1),e.equal(o.foo,"baz"),e.end()}),tape("selection.property(name, function) passes the value function data, index and group",function(e){var t=jsdom("<parent id='one'><child id='three'></child><child id='four'></child></parent><parent id='two'><child id='five'></child></parent>"),o=t.querySelector("#one"),r=t.querySelector("#two"),n=t.querySelector("#three"),l=t.querySelector("#four"),a=t.querySelector("#five"),i=[];d3.selectAll([o,r]).datum(function(e,t){return"parent-"+t}).selectAll("child").data(function(e,t){return[0,1].map(function(e){return"child-"+t+"-"+e})}).property("color",function(e,t,o){i.push([this,e,t,o])}),e.deepEqual(i,[[n,"child-0-0",0,[n,l]],[l,"child-0-1",1,[n,l]],[a,"child-1-0",0,[a]]]),e.end()});